(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{44:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},74:function(e,t,n){},77:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(0),a=n(5),i=n.n(a),s=n(21),o=n.p+"static/media/preview-image.1846cd6d.jpg",u=(n(44),function(e){var t=e.city,n=e.title,c=e.category,a=e.price;return Object(r.jsxs)("div",{className:"card-item",children:[Object(r.jsxs)("div",{className:"image-wrap",children:[Object(r.jsx)("span",{className:"overlay"}),Object(r.jsx)("img",{width:"270",height:"180",src:o,alt:"Preview-image",className:"card-item__image"})]}),Object(r.jsx)("h3",{className:"card-item__city",children:t}),Object(r.jsx)("h2",{className:"card-item__title",children:n}),Object(r.jsxs)("div",{className:"info",children:[Object(r.jsx)("span",{className:"card-item__category",children:c}),Object(r.jsxs)("span",{className:"card-item__price",children:["$",a]})]})]})}),l=n(38),d=n(3),j={indicatorSeparator:function(e){return Object(d.a)(Object(d.a)({},e),{},{display:"none"})},dropdownIndicator:function(e){return Object(d.a)(Object(d.a)({},e),{},{color:"#33363e",":hover":{color:"inherit"}})},control:function(e,t){return Object(d.a)(Object(d.a)({},e),{},{width:"240px",minHeight:"42px",borderColor:t.isFocused?"hsl(0,0%,70%)":"#dee0e1",borderRadius:"0",boxShadow:"unset"})},valueContainer:function(e){return Object(d.a)(Object(d.a)({},e),{},{fontFamily:"inherit"})},singleValue:function(e){return Object(d.a)(Object(d.a)({},e),{},{color:"#4c505b"})}},b=function(e){var t=e.onChange,n=e.options,c=e.value;return Object(r.jsx)(l.a,{value:c,placeholder:"Choose a city",styles:j,options:n,onChange:function(e){t(e)}})},f=n(15),E=n(11),O=n(12);function p(){var e=Object(E.a)(["\n  left: ",";\n  right: ",";\n"]);return p=function(){return e},e}function h(){var e=Object(E.a)(["\n  right: ",";\n"]);return h=function(){return e},e}function C(){var e=Object(E.a)(["\n  left: ",";\n"]);return C=function(){return e},e}var m,g=O.a.span(C(),(function(e){return e.left})),R=O.a.span(h(),(function(e){return e.right})),v=O.a.span(p(),(function(e){return e.left}),(function(e){return e.right})),_=(n(67),function(e){var t=e.onChange,n=e.minValue,a=void 0===n?0:n,i=e.maxValue,s=void 0===i?200:i,o=e.currentRange,u=Object(c.useState)(o.min),l=Object(f.a)(u,2),d=l[0],j=l[1],b=Object(c.useState)(o.max),E=Object(f.a)(b,2),O=E[0],p=E[1],h=Object(c.useState)(S(o.min).left),C=Object(f.a)(h,2),m=C[0],_=C[1],x=Object(c.useState)(S(o.max).right),I=Object(f.a)(x,2),y=I[0],T=I[1];Object(c.useEffect)((function(){t(d,O)}),[d,O]),Object(c.useEffect)((function(){j(o.min),p(o.max),_(S(o.min).left),T(S(o.max).right)}),[o]);function S(e){var t=100*(e-a)/(s-a),n=16-.2*t;return{left:"calc(".concat(t,"% + ").concat(n,"px)"),right:"calc(100% - (".concat(t,"% + ").concat(n,"px))")}}return Object(r.jsxs)("div",{className:"range-slider-wrap",children:[Object(r.jsxs)("div",{className:"multi-range-slider",children:[Object(r.jsx)("input",{type:"range",min:a,max:s,value:d,onChange:function(e){var t=Math.min(Number(e.target.value),O-1),n=S(t).left;j(t),_(n)}}),Object(r.jsx)("input",{type:"range",min:a,max:s,value:O,onChange:function(e){var t=Math.max(Number(e.target.value),d+1),n=S(t).right;p(t),T(n)}}),Object(r.jsxs)("div",{className:"slider",children:[Object(r.jsx)("div",{className:"track"}),Object(r.jsx)(v,{left:m,right:y,className:"range"}),Object(r.jsx)(g,{left:m,className:"thumb left"}),Object(r.jsx)(R,{right:y,className:"thumb right"})]})]}),Object(r.jsxs)("span",{className:"range-price",children:[Object(r.jsxs)("span",{className:"range-price__left",children:["$",d]}),Object(r.jsx)("span",{className:"range-price__divider",children:"-"}),Object(r.jsxs)("span",{className:"range-price__left",children:["$",O]})]})]})}),x=n(9),I=n(20),y=n.n(I),T=(n(68),function(e){var t=e.title,n=e.className,c=e.children,a=y()("sidebar-section",Object(x.a)({},"".concat(n),n));return Object(r.jsxs)("section",{className:a,children:[Object(r.jsx)("h2",{className:"sidebar-section__title",children:t}),c]})}),S=(n(69),function(e){var t=e.title,n=e.onClick,c=e.className,a=y()("button",Object(x.a)({},"".concat(c),c));return Object(r.jsx)("button",{className:a,type:"button",onClick:n,children:t})}),A=n(8);!function(e){e.PRODUCTS_REQUEST="PRODUCTS_REQUEST",e.PRODUCTS_RECEIVE="PRODUCTS_RECEIVE",e.PRODUCTS_FILTER="PRODUCTS_FILTER",e.PRODUCTS_FAILURE="PRODUCTS_FAILURE",e.PRODUCTS_CLEAR="PRODUCTS_CLEAR"}(m||(m={}));var N=function(){return{type:m.PRODUCTS_REQUEST}},L=function(e){return{type:m.PRODUCTS_RECEIVE,payload:e}},P=function(e){return{type:m.PRODUCTS_FAILURE,payload:{err:e}}},U=function(e){return{type:m.PRODUCTS_FILTER,payload:e}},F={loading:!1,products:null,filteredProducts:null,error:null};var G=function(e){return{products:e.Products.products,loadingProducts:e.Products.loading,filteredProducts:e.Products.filteredProducts,error:e.Products.error}},k=n(7),w=n.n(k),V=n(10);var D,H="https://my-json-server.typicode.com/ahmeditaev/AG-test-json-server/",Q=function(){return function(){var e=Object(V.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(N()),e.prev=1,e.next=4,fetch("".concat(H,"products"));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,setTimeout((function(){t(L(r))}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(P(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()},Y=function(e){return function(t,n){var r=function(e,t){var n=Object.keys(t);return e.filter((function(e){return n.every((function(n){return"function"!==typeof t[n]||t[n](e[n])}))}))}(n().Products.products,e);t(U(r))}},M=function(){return function(e,t){var n=t().Products.products;e(U(n))}};!function(e){e.CITIES_REQUEST="CITIES_REQUEST",e.CITIES_RECEIVE="CITIES_RECEIVE",e.CITIES_FAILURE="CITIES_FAILURE",e.CITIES_CLEAR="CITIES_CLEAR"}(D||(D={}));var $=function(){return{type:D.CITIES_REQUEST}},J=function(e){return{type:D.CITIES_RECEIVE,payload:e}},B=function(e){return{type:D.CITIES_FAILURE,payload:{err:e}}},W={loading:!1,cities:null,error:null};var q,z=function(e){return{cities:e.Cities.cities,loadingCities:e.Cities.loading}},K=function(){return function(){var e=Object(V.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t($()),e.prev=1,e.next=4,fetch("".concat(H,"cities"));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,setTimeout((function(){t(J(r))}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(B(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()};!function(e){e.CATEGORIES_REQUEST="CATEGORIES_REQUEST",e.CATEGORIES_RECEIVE="CATEGORIES_RECEIVE",e.CATEGORIES_FAILURE="CATEGORIES_FAILURE",e.CATEGORIES_CLEAR="CATEGORIES_CLEAR"}(q||(q={}));var X=function(){return{type:q.CATEGORIES_REQUEST}},Z=function(e){return{type:q.CATEGORIES_RECEIVE,payload:e}},ee=function(e){return{type:q.CATEGORIES_FAILURE,payload:{err:e}}},te={loading:!1,categories:null,error:null};var ne,re=function(e){return{categories:e.Categories.categories,loadingCategories:e.Categories.loading}},ce=function(){return function(){var e=Object(V.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(X()),e.prev=1,e.next=4,fetch("".concat(H,"categories"));case 4:return n=e.sent,e.next=7,n.json();case 7:r=e.sent,setTimeout((function(){t(Z(r))}),2e3),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t(ee(e.t0));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()};!function(e){e.CITY_FILTER_CHANGE="CITY_FILTER_CHANGE",e.CATEGORY_FILTER_CHANGE="CATEGORY_FILTER_CHANGE",e.PRICE_FILTER_CHANGE="PRICE_FILTER_CHANGE",e.FILTER_CLEAR="FILTER_CLEAR"}(ne||(ne={}));var ae=function(e){return{type:ne.CITY_FILTER_CHANGE,payload:e}},ie=function(e){return{type:ne.CATEGORY_FILTER_CHANGE,payload:e}},se=function(e){return{type:ne.PRICE_FILTER_CHANGE,payload:e}},oe=function(){return{type:ne.FILTER_CLEAR}},ue={city:null,category:[],price:null};var le=function(e){return{selectedCity:e.VisibilityFilter.city,selectedPriceRange:e.VisibilityFilter.price,selectedCategories:e.VisibilityFilter.category}},de=function(e){return function(t){var n=e,r={id:n.value,name:n.label};t(ae(r))}},je=function(e){return function(t,n){var r=n().VisibilityFilter.category,c=new Set(r);c.has(e)?(c.delete(e),t(ie(Array.from(c)))):(c.add(e),t(ie(Array.from(c))))}},be=function(e){return function(t){t(se(e))}},fe=function(){return function(e){e(oe())}},Ee=function(e){return{value:e.id,label:e.name}},Oe=n.p+"static/media/check-icon.25e4663b.svg";function pe(){var e=Object(E.a)(["\n  border: 1px solid ",";\n\n  ::after {\n    background: ",";\n  }\n"]);return pe=function(){return e},e}var he=O.a.span(pe(),(function(e){return e.isChecked?"#1cb8ff":"#d5d7d8"}),(function(e){return e.isChecked?"url(".concat(Oe,") center center no-repeat"):"unset"})),Ce=(n(74),function(e){var t=e.id,n=e.isChecked,c=e.label,a=e.numberValue,i=e.onChange;return Object(r.jsxs)("div",{className:"checkbox-wrap",children:[Object(r.jsx)("input",{id:t,type:"checkbox",checked:n,onChange:i}),Object(r.jsxs)("label",{className:"checkbox",htmlFor:t,children:[Object(r.jsx)(he,{isChecked:n,className:"checkbox__icon"}),Object(r.jsx)("span",{className:"checkbox__label",children:c}),Object(r.jsxs)("span",{className:"checkbox__count",children:["(",a,")"]})]})]})}),me=n(4),ge=n(27),Re=n(34),ve=n(35),_e=n(36),xe=n.n(_e),Ie=A.c,ye={key:"root",storage:xe.a},Te=Object(me.combineReducers)({Products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.PRODUCTS_REQUEST:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case m.PRODUCTS_RECEIVE:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:null,products:t.payload,filteredProducts:t.payload});case m.PRODUCTS_FILTER:return Object(d.a)(Object(d.a)({},e),{},{filteredProducts:t.payload});case m.PRODUCTS_FAILURE:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload.err});case m.PRODUCTS_CLEAR:return{loading:!1,error:null,products:null,filteredProducts:null};default:return e}},Cities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D.CITIES_REQUEST:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case D.CITIES_RECEIVE:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:null,cities:t.payload});case D.CITIES_FAILURE:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload.error});case D.CITIES_CLEAR:return{loading:!1,error:null,cities:null};default:return e}},Categories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q.CATEGORIES_REQUEST:return Object(d.a)(Object(d.a)({},e),{},{loading:!0});case q.CATEGORIES_RECEIVE:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:null,categories:t.payload});case q.CATEGORIES_FAILURE:return Object(d.a)(Object(d.a)({},e),{},{loading:!1,error:t.payload.error});case q.CATEGORIES_CLEAR:return{loading:!1,error:null,categories:null};default:return e}},VisibilityFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne.CITY_FILTER_CHANGE:return Object(d.a)(Object(d.a)({},e),{},{city:t.payload});case ne.CATEGORY_FILTER_CHANGE:return Object(d.a)(Object(d.a)({},e),{},{category:t.payload});case ne.PRICE_FILTER_CHANGE:return Object(d.a)(Object(d.a)({},e),{},{price:t.payload});case ne.FILTER_CLEAR:return{city:null,category:[],price:null};default:return e}}}),Se=Object(me.applyMiddleware)(Re.a),Ae=Object(me.compose)(Se),Ne=Object(ge.a)(ye,Te),Le=Object(me.createStore)(Ne,Object(ve.composeWithDevTools)(Ae)),Pe=Object(ge.b)(Le),Ue=(n(77),function(){var e=Ie(re),t=Ie(G),n=Ie(le),c=t.products,a=e.categories,i=n.selectedCategories,s=je,o=Object(A.b)();if(!a||0===a.length)return null;return Object(r.jsx)("ul",{className:"category-list",children:a.map((function(e,t){return Object(r.jsx)("li",{className:"category-list__item",children:Object(r.jsx)(Ce,{id:e.id.toString(),isChecked:i.includes(e.id),label:e.name,numberValue:c.filter((function(t){return t.category===e.id})).length,onChange:(n=e.id,function(){return o(s(n))})})},t);var n}))})}),Fe=n.p+"static/media/sad-icon.978076cf.svg",Ge=(n(78),function(){return Object(r.jsxs)("div",{className:"no-data-wrap",children:[Object(r.jsx)("img",{width:"150",height:"150",src:Fe,alt:"No data found"}),Object(r.jsx)("p",{children:"No data found"})]})}),ke=(n(79),function(){var e=Ie(G),t=Ie(z),n=Ie(re),a=Ie(le),i=Q,o=Y,l=M,d=K,j=ce,f=de,E=be,O=fe,p=e.products,h=e.loadingProducts,C=e.filteredProducts,m=e.error,g=t.cities,R=t.loadingCities,v=n.categories,x=n.loadingCategories,I=a.selectedCity,y=a.selectedPriceRange,N=a.selectedCategories,L=Object(A.b)();if(Object(c.useEffect)((function(){!p&&L(i()),!g&&L(d()),!v&&L(j())}),[]),h||R||x)return Object(r.jsx)("div",{className:"spinner"});if(!p||0===p.length)return Object(r.jsxs)("div",{children:[Object(r.jsx)("p",{children:"No data"}),Object(r.jsx)("p",{children:m||""})]});var P=g&&g.length?g.map(Ee):[],U=p.map((function(e){return e.price})),F={min:Math.min.apply(Math,Object(s.a)(U)),max:Math.max.apply(Math,Object(s.a)(U))};return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)("div",{className:"container",children:Object(r.jsxs)("div",{className:"content",children:[Object(r.jsxs)("div",{className:"sidebar",children:[Object(r.jsx)(T,{title:"City",children:Object(r.jsx)(b,{value:I?Ee(I):null,options:P,onChange:function(e){return L(f(e))}})}),Object(r.jsx)(T,{title:"Categories",children:Object(r.jsx)(Ue,{})}),Object(r.jsxs)(T,{title:"Price",children:[Object(r.jsxs)("div",{className:"price-wrap",children:[Object(r.jsx)(_,{currentRange:y||F,minValue:F.min,maxValue:F.max,onChange:function(e,t){return L(E({min:e,max:t}))}}),Object(r.jsx)(S,{className:"filter-button",title:"Filter",onClick:function(){var e=y?y.min:F.min,t=y?y.max:F.max;L(o({price:function(n){return n>=e&&n<=t},city:function(e){return!I||[I.id].includes(e)},category:function(e){return!N.length||Object(s.a)(N).includes(e)}}))}})]}),Object(r.jsx)(S,{className:"reset-button",title:"Reset filter",onClick:function(){L(O()),L(l())}})]})]}),Object(r.jsx)("div",{className:"main",children:Object(r.jsx)("div",{className:"card-list",children:C&&C.length?C.map((function(e,t){var n=v&&v.length?v.find((function(t){return e.category===t.id})):null,c=g&&g.length?g.find((function(t){return e.city===t.id})):null;return Object(r.jsx)(u,{city:c?c.name:"",title:e.name,category:n?n.name:"",price:e.price},t)})):Object(r.jsx)(Ge,{})})})]})})})}),we=n(37);n(80);i.a.render(Object(r.jsx)(A.a,{store:Le,children:Object(r.jsx)(we.a,{persistor:Pe,children:Object(r.jsx)(ke,{})})}),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.a99644f0.chunk.js.map